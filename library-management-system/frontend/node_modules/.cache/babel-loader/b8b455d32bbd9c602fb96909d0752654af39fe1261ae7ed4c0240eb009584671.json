{"ast":null,"code":"//frontend\\src\\services\\authService.js\nimport axios from \"axios\";\nconst API_URL = \"http://localhost:5000/api/auth\";\nexport const login = async (username, password) => {\n  try {\n    const response = await axios.post(`${API_URL}/login`, {\n      username,\n      password\n    });\n    if (response.data.access_token) {\n      localStorage.setItem(\"token\", response.data.access_token);\n      localStorage.setItem(\"user\", JSON.stringify(response.data.user));\n    }\n    return response.data;\n  } catch (error) {\n    var _error$response, _error$response$data;\n    console.error(\"Login error:\", error);\n    return {\n      error: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || \"Login failed\"\n    };\n  }\n};\n\n// ---------------- Register ----------------\nexport const register = async userData => {\n  try {\n    const response = await axios.post(`${API_URL}/register`, userData);\n    return response.data;\n  } catch (error) {\n    var _error$response2, _error$response2$data;\n    console.error(\"Register error:\", error);\n    return {\n      error: ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || \"Registration failed\"\n    };\n  }\n};\n\n// ---------------- Logout ----------------\nexport const logout = () => {\n  localStorage.removeItem(\"token\");\n  localStorage.removeItem(\"user\");\n};\n\n// ---------------- Get User Profile ----------------\nexport const getUserProfile = async () => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    const response = await axios.get(`${API_URL}/profile`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    console.error(\"Get profile error:\", error);\n    throw error;\n  }\n};\n\n// ---------------- Update User Profile ----------------\nexport const updateUserProfile = async data => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    const response = await axios.put(`${API_URL}/profile`, data, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    console.error(\"Update profile error:\", error);\n    throw error;\n  }\n};\n\n// ---------------- Change Password ----------------\nexport const changePassword = async ({\n  oldPassword,\n  newPassword\n}) => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    const response = await axios.post(`${API_URL}/change-password`, {\n      oldPassword,\n      newPassword\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    console.error(\"Change password error:\", error);\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","API_URL","login","username","password","response","post","data","access_token","localStorage","setItem","JSON","stringify","user","error","_error$response","_error$response$data","console","register","userData","_error$response2","_error$response2$data","logout","removeItem","getUserProfile","token","getItem","get","headers","Authorization","updateUserProfile","put","changePassword","oldPassword","newPassword"],"sources":["D:/library-management-system/frontend/src/services/authService.js"],"sourcesContent":["//frontend\\src\\services\\authService.js\r\nimport axios from \"axios\";\r\n\r\nconst API_URL = \"http://localhost:5000/api/auth\";\r\n\r\n\r\nexport const login = async (username, password) => {\r\n  try {\r\n    const response = await axios.post(`${API_URL}/login`, { username, password });\r\n    if (response.data.access_token) {\r\n      localStorage.setItem(\"token\", response.data.access_token);\r\n      localStorage.setItem(\"user\", JSON.stringify(response.data.user));\r\n    }\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Login error:\", error);\r\n    return { error: error.response?.data?.error || \"Login failed\" };\r\n  }\r\n};\r\n\r\n// ---------------- Register ----------------\r\nexport const register = async (userData) => {\r\n  try {\r\n    const response = await axios.post(`${API_URL}/register`, userData);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Register error:\", error);\r\n    return { error: error.response?.data?.error || \"Registration failed\" };\r\n  }\r\n};\r\n\r\n// ---------------- Logout ----------------\r\nexport const logout = () => {\r\n  localStorage.removeItem(\"token\");\r\n  localStorage.removeItem(\"user\");\r\n};\r\n\r\n// ---------------- Get User Profile ----------------\r\nexport const getUserProfile = async () => {\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    const response = await axios.get(`${API_URL}/profile`, {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Get profile error:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// ---------------- Update User Profile ----------------\r\nexport const updateUserProfile = async (data) => {\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    const response = await axios.put(`${API_URL}/profile`, data, {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Update profile error:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// ---------------- Change Password ----------------\r\nexport const changePassword = async ({ oldPassword, newPassword }) => {\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    const response = await axios.post(\r\n      `${API_URL}/change-password`,\r\n      { oldPassword, newPassword },\r\n      { headers: { Authorization: `Bearer ${token}` } }\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Change password error:\", error);\r\n    throw error;\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}